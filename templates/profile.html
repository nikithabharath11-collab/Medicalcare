{% extends "base.html" %}
{% block title %}My Profile - MedicalCare AI{% endblock %}

{% block content %}
<div class="prediction-page" style="max-width: 800px;">
    <div class="page-header">
        <h1>Patient Profile</h1>
        <p>Manage your personal and medical information</p>
    </div>

    <div class="form-card">
        <form method="POST" action="/profile">
            <h3 style="color: var(--gold); margin-bottom: 1.5rem;">Personal Information</h3>
            <div class="form-grid">
                <div class="form-group">
                    <label>Full Name</label>
                    <input type="text" name="name" value="{{ current_user.name }}" required>
                </div>
                <div class="form-group">
                    <label>Email (cannot change)</label>
                    <input type="email" value="{{ current_user.email }}" disabled style="opacity: 0.6;">
                </div>
                <div class="form-group">
                    <label>Age</label>
                    <input type="number" name="age" min="1" max="120" value="{{ current_user.age or '' }}" placeholder="e.g., 25">
                </div>
                <div class="form-group">
                    <label>Gender</label>
                    <select name="gender">
                        <option value="">Select</option>
                        <option value="Male" {% if current_user.gender == 'Male' %}selected{% endif %}>Male</option>
                        <option value="Female" {% if current_user.gender == 'Female' %}selected{% endif %}>Female</option>
                        <option value="Other" {% if current_user.gender == 'Other' %}selected{% endif %}>Other</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Blood Group</label>
                    <select name="blood_group">
                        <option value="">Select</option>
                        {% for bg in ['A+', 'A-', 'B+', 'B-', 'AB+', 'AB-', 'O+', 'O-'] %}
                        <option value="{{ bg }}" {% if current_user.blood_group == bg %}selected{% endif %}>{{ bg }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="form-group">
                    <label>Phone Number</label>
                    <input type="tel" name="phone" value="{{ current_user.phone or '' }}" placeholder="e.g., +91 9876543210">
                </div>
            </div>

            <div class="form-group" style="margin-top: 1.5rem;">
                <label>Address</label>
                <textarea name="address" rows="2" placeholder="Your full address">{{ current_user.address or '' }}</textarea>
            </div>

            <h3 style="color: var(--gold); margin: 2rem 0 1.5rem;">Emergency & Medical</h3>
            <div class="form-grid">
                <div class="form-group">
                    <label>Emergency Contact (Name & Phone)</label>
                    <input type="text" name="emergency_contact" value="{{ current_user.emergency_contact or '' }}" placeholder="e.g., John Doe - 9876543210">
                </div>
            </div>
            <div class="form-group" style="margin-top: 1rem;">
                <label>Known Medical Conditions</label>
                <textarea name="medical_conditions" rows="3" placeholder="e.g., Diabetes, Hypertension, Asthma...">{{ current_user.medical_conditions or '' }}</textarea>
            </div>

            <div class="form-actions" style="margin-top: 2rem;">
                <button type="submit" class="btn btn-primary btn-lg">Save Profile</button>
            </div>
        </form>
    </div>

    <div class="form-card" style="margin-top: 1.5rem;">
        <h3 style="color: var(--gold); margin-bottom: 0.5rem;">Account Info</h3>
        <p style="color: var(--text-secondary); font-size: 0.9rem;">
            Member since: <strong style="color: var(--text-primary);">{{ current_user.created_at.strftime('%B %d, %Y') }}</strong>
        </p>
    </div>
</div>
{% endblock %}
